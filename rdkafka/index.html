<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `rdkafka` crate."><meta name="keywords" content="rust, rustlang, rust-lang, rdkafka"><title>rdkafka - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../rdkafka/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Crate rdkafka</p><div class="block version"><p>Version 0.25.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all rdkafka's items</p></a><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li></ul></div><p class="location"></p><div id="sidebar-vars" data-name="rdkafka" data-ty="mod" data-relpath="../"></div></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/rdkafka/lib.rs.html#1-286" title="goto source code">[src]</a></span><span class="in-band">Crate <a class="mod" href="">rdkafka</a></span></h1><div class="docblock"><p>A fully asynchronous, <a href="https://github.com/rust-lang/futures-rs">futures</a>-enabled <a href="https://kafka.apache.org">Apache Kafka</a> client
library for Rust based on <a href="https://github.com/edenhill/librdkafka">librdkafka</a>.</p>
<h2 id="the-library" class="section-header"><a href="#the-library">The library</a></h2>
<p><code>rust-rdkafka</code> provides a safe Rust interface to librdkafka. The master
branch is currently based on librdkafka 1.6.0.</p>
<h3 id="documentation" class="section-header"><a href="#documentation">Documentation</a></h3>
<ul>
<li><a href="https://fede1024.github.io/rust-rdkafka/">Current master branch</a></li>
<li><a href="https://docs.rs/rdkafka/">Latest release</a></li>
<li><a href="https://github.com/fede1024/rust-rdkafka/blob/master/changelog.md">Changelog</a></li>
</ul>
<h3 id="features" class="section-header"><a href="#features">Features</a></h3>
<p>The main features provided at the moment are:</p>
<ul>
<li>Support for all Kafka versions since 0.8.x. For more information about
broker compatibility options, check the <a href="https://github.com/edenhill/librdkafka/blob/master/INTRODUCTION.md#broker-version-compatibility">librdkafka
documentation</a>.</li>
<li>Consume from single or multiple topics.</li>
<li>Automatic consumer rebalancing.</li>
<li>Customizable rebalance, with pre and post rebalance callbacks.</li>
<li>Synchronous or asynchronous message production.</li>
<li>Customizable offset commit.</li>
<li>Create and delete topics and add and edit partitions.</li>
<li>Alter broker and topic configurations.</li>
<li>Access to cluster metadata (list of topic-partitions, replicas, active
brokers etc).</li>
<li>Access to group metadata (list groups, list members of groups, hostnames,
etc.).</li>
<li>Access to producer and consumer metrics, errors and callbacks.</li>
<li>Exactly-once semantics (EOS) via idempotent and transactional producers
and read-committed consumers.</li>
</ul>
<h3 id="one-million-messages-per-second" class="section-header"><a href="#one-million-messages-per-second">One million messages per second</a></h3>
<p><code>rust-rdkafka</code> is designed to be easy and safe to use thanks to the
abstraction layer written in Rust, while at the same time being extremely
fast thanks to the librdkafka C library.</p>
<p>Here are some benchmark results using the <a href="https://docs.rs/rdkafka/*/rdkafka/producer/base_producer/struct.BaseProducer.html"><code>BaseProducer</code></a>,
sending data to a single Kafka 0.11 process running in localhost (default
configuration, 3 partitions). Hardware: Dell laptop, with Intel Core
i7-4712HQ @ 2.30GHz.</p>
<ul>
<li>
<p>Scenario: produce 5 million messages, 10 bytes each, wait for all of them to be acked</p>
<ul>
<li>1045413 messages/s, 9.970 MB/s  (average over 5 runs)</li>
</ul>
</li>
<li>
<p>Scenario: produce 100000 messages, 10 KB each, wait for all of them to be acked</p>
<ul>
<li>24623 messages/s, 234.826 MB/s  (average over 5 runs)</li>
</ul>
</li>
</ul>
<p>For more numbers, check out the <a href="https://github.com/fede1024/kafka-benchmark">kafka-benchmark</a> project.</p>
<h3 id="client-types" class="section-header"><a href="#client-types">Client types</a></h3>
<p><code>rust-rdkafka</code> provides low level and high level consumers and producers.</p>
<p>Low level:</p>
<ul>
<li><a href="https://docs.rs/rdkafka/*/rdkafka/consumer/base_consumer/struct.BaseConsumer.html"><code>BaseConsumer</code></a>: a simple wrapper around the librdkafka consumer. It
must be periodically <code>poll()</code>ed in order to execute callbacks, rebalances
and to receive messages.</li>
<li><a href="https://docs.rs/rdkafka/*/rdkafka/producer/base_producer/struct.BaseProducer.html"><code>BaseProducer</code></a>: a simple wrapper around the librdkafka producer. As in
the consumer case, the user must call <code>poll()</code> periodically to execute
delivery callbacks.</li>
<li><a href="https://docs.rs/rdkafka/*/rdkafka/producer/base_producer/struct.ThreadedProducer.html"><code>ThreadedProducer</code></a>: a <code>BaseProducer</code> with a separate thread dedicated to
polling the producer.</li>
</ul>
<p>High level:</p>
<ul>
<li><a href="https://docs.rs/rdkafka/*/rdkafka/consumer/stream_consumer/struct.StreamConsumer.html"><code>StreamConsumer</code></a>: a <a href="https://docs.rs/futures/*/futures/stream/trait.Stream.html"><code>Stream</code></a> of messages that takes care of
polling the consumer automatically.</li>
<li><a href="https://docs.rs/rdkafka/*/rdkafka/producer/future_producer/struct.FutureProducer.html"><code>FutureProducer</code></a>: a <a href="https://doc.rust-lang.org/stable/std/future/trait.Future.html"><code>Future</code></a> that will be completed once
the message is delivered to Kafka (or failed).</li>
</ul>
<p>For more information about consumers and producers, refer to their
module-level documentation.</p>
<p><em>Warning</em>: the library is under active development and the APIs are likely
to change.</p>
<h3 id="asynchronous-data-processing-with-tokio" class="section-header"><a href="#asynchronous-data-processing-with-tokio">Asynchronous data processing with Tokio</a></h3>
<p><a href="https://tokio.rs/">Tokio</a> is a platform for fast processing of asynchronous events in Rust.
The interfaces exposed by the <a href="https://docs.rs/rdkafka/*/rdkafka/consumer/stream_consumer/struct.StreamConsumer.html"><code>StreamConsumer</code></a> and the <a href="https://docs.rs/rdkafka/*/rdkafka/producer/future_producer/struct.FutureProducer.html"><code>FutureProducer</code></a>
allow rust-rdkafka users to easily integrate Kafka consumers and producers
within the Tokio platform, and write asynchronous message processing code.
Note that rust-rdkafka can be used without Tokio.</p>
<p>To see rust-rdkafka in action with Tokio, check out the
<a href="https://github.com/fede1024/rust-rdkafka/blob/master/examples/asynchronous_processing.rs">asynchronous processing example</a> in the examples folder.</p>
<h3 id="at-least-once-delivery" class="section-header"><a href="#at-least-once-delivery">At-least-once delivery</a></h3>
<p>At-least-once delivery semantics are common in many streaming applications:
every message is guaranteed to be processed at least once; in case of
temporary failure, the message can be re-processed and/or re-delivered,
but no message will be lost.</p>
<p>In order to implement at-least-once delivery the stream processing
application has to carefully commit the offset only once the message has
been processed. Committing the offset too early, instead, might cause
message loss, since upon recovery the consumer will start from the next
message, skipping the one where the failure occurred.</p>
<p>To see how to implement at-least-once delivery with <code>rdkafka</code>, check out the
<a href="https://github.com/fede1024/rust-rdkafka/blob/master/examples/at_least_once.rs">at-least-once delivery example</a> in the examples folder. To know more about
delivery semantics, check the <a href="https://kafka.apache.org/0101/documentation.html#semantics">message delivery semantics</a> chapter in the
Kafka documentation.</p>
<h3 id="exactly-once-semantics" class="section-header"><a href="#exactly-once-semantics">Exactly-once semantics</a></h3>
<p>Exactly-once semantics (EOS) can be achieved using transactional producers,
which allow produced records and consumer offsets to be committed or aborted
atomically. Consumers that set their <code>isolation.level</code> to <code>read_committed</code>
will only observe committed messages.</p>
<p>EOS is useful in read-process-write scenarios that require messages to be
processed exactly once.</p>
<p>To learn more about using transactions in rust-rdkafka, see the
<a href="producer-transactions">Transactions</a> section of the producer documentation.</p>
<h3 id="users" class="section-header"><a href="#users">Users</a></h3>
<p>Here are some of the projects using rust-rdkafka:</p>
<ul>
<li><a href="https://github.com/frankmcsherry/timely-dataflow">timely-dataflow</a>: a distributed data-parallel compute engine. See also
the <a href="https://github.com/frankmcsherry/blog/blob/master/posts/2017-11-08.md">blog post</a> announcing its Kafka integration.</li>
<li><a href="https://github.com/fede1024/kafka-view">kafka-view</a>: a web interface for Kafka clusters.</li>
<li><a href="https://github.com/fede1024/kafka-benchmark">kafka-benchmark</a>: a high performance benchmarking tool for Kafka.</li>
</ul>
<p><em>If you are using rust-rdkafka, please let us know!</em></p>
<h2 id="installation" class="section-header"><a href="#installation">Installation</a></h2>
<p>Add this to your <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[dependencies]
rdkafka = { version = &quot;0.25&quot;, features = [&quot;cmake-build&quot;] }
</code></pre>
<p>This crate will compile librdkafka from sources and link it statically to
your executable. To compile librdkafka you'll need:</p>
<ul>
<li>the GNU toolchain</li>
<li>GNU <code>make</code></li>
<li><code>pthreads</code></li>
<li><code>zlib</code>: optional, but included by default (feature: <code>libz</code>)</li>
<li><code>cmake</code>: optional, <em>not</em> included by default (feature: <code>cmake-build</code>)</li>
<li><code>libssl-dev</code>: optional, <em>not</em> included by default (feature: <code>ssl</code>)</li>
<li><code>libsasl2-dev</code>: optional, <em>not</em> included by default (feature: <code>gssapi</code>)</li>
<li><code>libzstd-dev</code>: optional, <em>not</em> included by default (feature: <code>zstd-pkg-config</code>)</li>
</ul>
<p>Note that using the CMake build system, via the <code>cmake-build</code> feature, is
encouraged if you can take the dependency on CMake.</p>
<p>By default a submodule with the librdkafka sources pinned to a specific
commit will be used to compile and statically link the library. The
<code>dynamic-linking</code> feature can be used to instead dynamically link rdkafka to
the system's version of librdkafka. Example:</p>
<pre><code class="language-toml">[dependencies]
rdkafka = { version = &quot;0.25&quot;, features = [&quot;dynamic-linking&quot;] }
</code></pre>
<p>For a full listing of features, consult the <a href="https://github.com/fede1024/rust-rdkafka/tree/master/rdkafka-sys/README.md#features">rdkafka-sys crate's
documentation</a>. All of rdkafka-sys features are
re-exported as rdkafka features.</p>
<h3 id="minimum-supported-rust-version-msrv" class="section-header"><a href="#minimum-supported-rust-version-msrv">Minimum supported Rust version (MSRV)</a></h3>
<p>The current minimum supported Rust version (MSRV) is 1.45.0. Note that
bumping the MSRV is not considered a breaking change. Any release of
rust-rdkafka may bump the MSRV.</p>
<h3 id="asynchronous-runtimes" class="section-header"><a href="#asynchronous-runtimes">Asynchronous runtimes</a></h3>
<p>Some features of the <a href="https://docs.rs/rdkafka/*/rdkafka/consumer/stream_consumer/struct.StreamConsumer.html"><code>StreamConsumer</code></a> and <a href="https://docs.rs/rdkafka/*/rdkafka/producer/future_producer/struct.FutureProducer.html"><code>FutureProducer</code></a> depend on
Tokio, which can be a heavyweight dependency for users who only intend to
use the low-level consumers and producers. The Tokio integration is
enabled by default, but can be disabled by turning off default features:</p>
<pre><code class="language-toml">[dependencies]
rdkafka = { version = &quot;0.25&quot;, default-features = false }
</code></pre>
<p>If you would like to use an asynchronous runtime besides Tokio, you can
integrate it with rust-rdkafka by providing a shim that implements the
<a href="https://docs.rs/rdkafka/*/rdkafka/util/trait.AsyncRuntime.html"><code>AsyncRuntime</code></a> trait. See the following examples for details:</p>
<ul>
<li><a href="https://github.com/fede1024/rust-rdkafka/blob/master/examples/runtime_smol.rs">smol</a></li>
<li><a href="https://github.com/fede1024/rust-rdkafka/blob/master/examples/runtime_async_std.rs">async-std</a></li>
</ul>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2>
<p>You can find examples in the <a href="https://github.com/fede1024/rust-rdkafka/blob/master/examples/"><code>examples</code></a> folder. To run them:</p>
<pre><code class="language-bash">cargo run --example &lt;example_name&gt; -- &lt;example_args&gt;
</code></pre>
<h2 id="debugging" class="section-header"><a href="#debugging">Debugging</a></h2>
<p>rust-rdkafka uses the <a href="https://docs.rs/log"><code>log</code></a> and <a href="https://docs.rs/env_logger"><code>env_logger</code></a> crates to handle logging.
Logging can be enabled using the <code>RUST_LOG</code> environment variable, for
example:</p>
<pre><code class="language-bash">RUST_LOG=&quot;librdkafka=trace,rdkafka::client=debug&quot; cargo test
</code></pre>
<p>This will configure the logging level of librdkafka to trace, and the level
of the client module of the Rust client to debug. To actually receive logs
from librdkafka, you also have to set the <code>debug</code> option in the producer or
consumer configuration (see librdkafka
<a href="https://github.com/edenhill/librdkafka/blob/master/CONFIGURATION.md">configuration</a>).</p>
<p>To enable debugging in your project, make sure you initialize the logger
with <code>env_logger::init()</code>, or the equivalent for any <code>log</code>-compatible
logging framework.</p>
</div><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2>
<table><tr><td><code>pub use crate::client::<a class="trait" href="../rdkafka/client/trait.ClientContext.html" title="trait rdkafka::client::ClientContext">ClientContext</a>;</code></td></tr><tr><td><code>pub use crate::config::<a class="struct" href="../rdkafka/config/struct.ClientConfig.html" title="struct rdkafka::config::ClientConfig">ClientConfig</a>;</code></td></tr><tr><td><code>pub use crate::message::<a class="trait" href="../rdkafka/message/trait.Message.html" title="trait rdkafka::message::Message">Message</a>;</code></td></tr><tr><td><code>pub use crate::message::<a class="enum" href="../rdkafka/message/enum.Timestamp.html" title="enum rdkafka::message::Timestamp">Timestamp</a>;</code></td></tr><tr><td><code>pub use crate::statistics::<a class="struct" href="../rdkafka/statistics/struct.Statistics.html" title="struct rdkafka::statistics::Statistics">Statistics</a>;</code></td></tr><tr><td><code>pub use crate::topic_partition_list::<a class="enum" href="../rdkafka/topic_partition_list/enum.Offset.html" title="enum rdkafka::topic_partition_list::Offset">Offset</a>;</code></td></tr><tr><td><code>pub use crate::topic_partition_list::<a class="struct" href="../rdkafka/topic_partition_list/struct.TopicPartitionList.html" title="struct rdkafka::topic_partition_list::TopicPartitionList">TopicPartitionList</a>;</code></td></tr><tr><td><code>pub use crate::util::<a class="trait" href="../rdkafka/util/trait.IntoOpaque.html" title="trait rdkafka::util::IntoOpaque">IntoOpaque</a>;</code></td></tr></table><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<table><tr class="module-item"><td><a class="mod" href="admin/index.html" title="rdkafka::admin mod">admin</a></td><td class="docblock-short"><p>Admin client.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="client/index.html" title="rdkafka::client mod">client</a></td><td class="docblock-short"><p>Common client functionality.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="config/index.html" title="rdkafka::config mod">config</a></td><td class="docblock-short"><p>Producer and consumer configuration.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="consumer/index.html" title="rdkafka::consumer mod">consumer</a></td><td class="docblock-short"><p>Kafka consumers.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="error/index.html" title="rdkafka::error mod">error</a></td><td class="docblock-short"><p>Error manipulations.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="groups/index.html" title="rdkafka::groups mod">groups</a></td><td class="docblock-short"><p>Group membership API.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="message/index.html" title="rdkafka::message mod">message</a></td><td class="docblock-short"><p>Store and manipulate Kafka messages.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="metadata/index.html" title="rdkafka::metadata mod">metadata</a></td><td class="docblock-short"><p>Cluster metadata.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="producer/index.html" title="rdkafka::producer mod">producer</a></td><td class="docblock-short"><p>Kafka producers.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="statistics/index.html" title="rdkafka::statistics mod">statistics</a></td><td class="docblock-short"><p>Client and broker statistics.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="topic_partition_list/index.html" title="rdkafka::topic_partition_list mod">topic_partition_list</a></td><td class="docblock-short"><p>Data structures representing topic, partitions and offsets.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="types/index.html" title="rdkafka::types mod">types</a></td><td class="docblock-short"><p>Aliases for types defined in the auto-generated bindings.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="util/index.html" title="rdkafka::util mod">util</a></td><td class="docblock-short"><p>Utility functions and types.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="rdkafka"></div>
    <script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>